<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8"> <title>YatKal - Check-in</title>
    <style> body { display: flex; align-items: center; justify-content: center; height: 100vh; background-color: #f4f4f4; margin: 0; } .qr-container { padding: 40px; text-align: center; background: #fff; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); } h1 { margin-top: 0; } #qr-kodu { min-height: 256px; min-width: 256px; display: flex; align-items: center; justify-content: center; margin-top: 20px; } </style>
</head>
<body>
    <div class="qr-container">
        <h1>YatKal Check-in</h1>
        <p>Lütfen YatKal uygulamasından aşağıdaki QR kodu taratın.</p>
        <div id="qr-kodu"><p>Bağlanılıyor...</p></div>
    </div>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js"></script>
    <script>
        const socket = io("/"); const qrKoduAlani = document.getElementById("qr-kodu");
        socket.on("yeni_qr_kodu", (biletKodu) => {
            qrKoduAlani.innerHTML = ""; try { const qr = qrcode(4, 'L'); qr.addData(biletKodu); qr.make(); qrKoduAlani.innerHTML = qr.createImgTag(8, 12); } catch (e) { console.error("QR üretilemedi:", e); }
        });
        socket.on("connect_error", (err) => { qrKoduAlani.innerHTML = "Sunucuya bağlanılamadı."; });
    </script>
</body>
</html>